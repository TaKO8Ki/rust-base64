require "benchmark/ips"
require "base64"
require "rust_base64"

Benchmark.ips do |x|
  input = "foweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiahewofhaweofhafoweahfoahweofhaoehfoahewoffoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiweyroafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqihaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiweyroafha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4u23ahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqi740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhffha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4fowfoweahfoahfaweofhaowehfo3245129375192635-91723-51rhq9oehfoqwe'//////////////////fjawoefo1231p2fjaofweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiweyroafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;fweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiweyroafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofahewofhaweofhafoweahfoahweofhaoehfooahweofhyorutyeityqihaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoaqoaehfoawfafjw334o4fowfoweahfoahfaweofhaowehfo3245129375192635-91723-51rhq9oehfoqwqoaehfoawfafjw334o4fowfoweahfoahfaweofhaowehfo3245129375192635-91723-51rhq9oehfoqweewehffahe;foahweofhyorutyeityqiweyroafha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4u23ahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqi740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhffha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4foweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiofhafoawehffahe;foaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiweyroafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofahewofhaweofhafoweahfoahweofhaoehfohweofhyorutyeityqiweyroafha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4u23740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhfu23740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhffaeruq203uahdf;aojfowja`o3`p93[-0wrg9awehfaw9e8yur[waejfaoeahfoahweofhaoehfoahewofhaweofhafoweafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiweyroafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqihaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiweyroafha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4u23ahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqi740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhffha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4foweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiofhafoawehffahe;foahweofhyorutyeityqiweyroafha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4u23740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhfu23740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhffaeruq203uahdf;aojfowja`o3`p93[-0wrg9awehfaw9e8yur[waejfaohfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiofhafoawehffahe;foahweofhyorutyeityqiweyroafha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4u23740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhfu23740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhffaeruq203uahdf;aojfowja`o3`p93[-0wrg9awehfaw9e8yur[waejfaohaweofhafoawehffahe;foahweofhyorutyeityqiweyroafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqihaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiweyroafha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4u23ahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqi740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhffha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4foweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoweahfoahweofhaoehfoahewofhaweahewofhaweofhafoweahfoahweofhaoehfoahewofhaweofhafoawehffahe;foahweofhyorutyeityqiofhafoawehffahe;foahweofhyorutyeityqiweyroafha;odfhao;wehfoaehhf;qoaehfoawfafjw334o4u23740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhfu23740qfaha9wyer0q234qr;no3iryfpa0o9wuerqo32irhffaeruq203uahdf;aojfowja`o3`p93[-0wrg9awehfaw9e8yur[waejfao"
  x.report("Base64.#encode64") { Base64.encode64(input) }
  x.report("RustBase64.#encode") { RustBase64.encode(input) }
  x.compare!
end

Benchmark.ips do |x|
  input = "Zm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2Zmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWlhaGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmFoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWloYW9laGZvYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvYXdlaGZmYWhlO2ZvYWh3ZW9maHlvcnV0eWVpdHlxaXdleXJvYWZoYTtvZGZoYW87d2VoZm9hZWhoZjtxb2FlaGZvYXdmYWZqdzMzNG80dTIzYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvYXdlaGZmYWhlO2ZvYWh3ZW9maHlvcnV0eWVpdHlxaTc0MHFmYWhhOXd5ZXIwcTIzNHFyO25vM2lyeWZwYTBvOXd1ZXJxbzMyaXJoZmZoYTtvZGZoYW87d2VoZm9hZWhoZjtxb2FlaGZvYXdmYWZqdzMzNG80Zm93Zm93ZWFoZm9haGZhd2VvZmhhb3dlaGZvMzI0NTEyOTM3NTE5MjYzNS05MTcyMy01MXJocTlvZWhmb3F3ZScvLy8vLy8vLy8vLy8vLy8vLy9mamF3b2VmbzEyMzFwMmZqYW9md2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWlhaGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmFoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWl3ZXlyb2Fmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9mYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9vYWh3ZW9maHlvcnV0eWVpdHlxaWhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hcW9hZWhmb2F3ZmFmanczMzRvNGZvd2Zvd2VhaGZvYWhmYXdlb2ZoYW93ZWhmbzMyNDUxMjkzNzUxOTI2MzUtOTE3MjMtNTFyaHE5b2VoZm9xd3FvYWVoZm9hd2ZhZmp3MzM0bzRmb3dmb3dlYWhmb2FoZmF3ZW9maGFvd2VoZm8zMjQ1MTI5Mzc1MTkyNjM1LTkxNzIzLTUxcmhxOW9laGZvcXdlZXdlaGZmYWhlO2ZvYWh3ZW9maHlvcnV0eWVpdHlxaXdleXJvYWZoYTtvZGZoYW87d2VoZm9hZWhoZjtxb2FlaGZvYXdmYWZqdzMzNG80dTIzYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvYXdlaGZmYWhlO2ZvYWh3ZW9maHlvcnV0eWVpdHlxaTc0MHFmYWhhOXd5ZXIwcTIzNHFyO25vM2lyeWZwYTBvOXd1ZXJxbzMyaXJoZmZoYTtvZGZoYW87d2VoZm9hZWhoZjtxb2FlaGZvYXdmYWZqdzMzNG80Zm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VhaGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpb2ZoYWZvYXdlaGZmYWhlO2ZvYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmFoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvaHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZmhhO29kZmhhbzt3ZWhmb2FlaGhmO3FvYWVoZm9hd2ZhZmp3MzM0bzR1MjM3NDBxZmFoYTl3eWVyMHEyMzRxcjtubzNpcnlmcGEwbzl3dWVycW8zMmlyaGZ1MjM3NDBxZmFoYTl3eWVyMHEyMzRxcjtubzNpcnlmcGEwbzl3dWVycW8zMmlyaGZmYWVydXEyMDN1YWhkZjthb2pmb3dqYWBvM2BwOTNbLTB3cmc5YXdlaGZhdzllOHl1clt3YWVqZmFvZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb3dlYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvYXdlaGZmYWhlO2ZvYWh3ZW9maHlvcnV0eWVpdHlxaWFoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWl3ZXlyb2Fmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9mYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvYXdlaGZmYWhlO2ZvYWh3ZW9maHlvcnV0eWVpdHlxaWhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZmhhO29kZmhhbzt3ZWhmb2FlaGhmO3FvYWVoZm9hd2ZhZmp3MzM0bzR1MjNhaGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpNzQwcWZhaGE5d3llcjBxMjM0cXI7bm8zaXJ5ZnBhMG85d3VlcnFvMzJpcmhmZmhhO29kZmhhbzt3ZWhmb2FlaGhmO3FvYWVoZm9hd2ZhZmp3MzM0bzRmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZWFoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWlvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZmhhO29kZmhhbzt3ZWhmb2FlaGhmO3FvYWVoZm9hd2ZhZmp3MzM0bzR1MjM3NDBxZmFoYTl3eWVyMHEyMzRxcjtubzNpcnlmcGEwbzl3dWVycW8zMmlyaGZ1MjM3NDBxZmFoYTl3eWVyMHEyMzRxcjtubzNpcnlmcGEwbzl3dWVycW8zMmlyaGZmYWVydXEyMDN1YWhkZjthb2pmb3dqYWBvM2BwOTNbLTB3cmc5YXdlaGZhdzllOHl1clt3YWVqZmFvaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZWFoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWlvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZmhhO29kZmhhbzt3ZWhmb2FlaGhmO3FvYWVoZm9hd2ZhZmp3MzM0bzR1MjM3NDBxZmFoYTl3eWVyMHEyMzRxcjtubzNpcnlmcGEwbzl3dWVycW8zMmlyaGZ1MjM3NDBxZmFoYTl3eWVyMHEyMzRxcjtubzNpcnlmcGEwbzl3dWVycW8zMmlyaGZmYWVydXEyMDN1YWhkZjthb2pmb3dqYWBvM2BwOTNbLTB3cmc5YXdlaGZhdzllOHl1clt3YWVqZmFvaGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWl3ZXlyb2Fmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9mYWhld29maGF3ZW9maGFmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvYXdlaGZmYWhlO2ZvYWh3ZW9maHlvcnV0eWVpdHlxaWhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZmhhO29kZmhhbzt3ZWhmb2FlaGhmO3FvYWVoZm9hd2ZhZmp3MzM0bzR1MjNhaGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpNzQwcWZhaGE5d3llcjBxMjM0cXI7bm8zaXJ5ZnBhMG85d3VlcnFvMzJpcmhmZmhhO29kZmhhbzt3ZWhmb2FlaGhmO3FvYWVoZm9hd2ZhZmp3MzM0bzRmb3dlYWhmb2Fod2VvZmhhb2VoZm9haGV3b2ZoYXdlb2ZoYWZvd2VhaGZvYWh3ZW9maGFvZWhmb2FoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZWFoZXdvZmhhd2VvZmhhZm93ZWFoZm9haHdlb2ZoYW9laGZvYWhld29maGF3ZW9maGFmb2F3ZWhmZmFoZTtmb2Fod2VvZmh5b3J1dHllaXR5cWlvZmhhZm9hd2VoZmZhaGU7Zm9haHdlb2ZoeW9ydXR5ZWl0eXFpd2V5cm9hZmhhO29kZmhhbzt3ZWhmb2FlaGhmO3FvYWVoZm9hd2ZhZmp3MzM0bzR1MjM3NDBxZmFoYTl3eWVyMHEyMzRxcjtubzNpcnlmcGEwbzl3dWVycW8zMmlyaGZ1MjM3NDBxZmFoYTl3eWVyMHEyMzRxcjtubzNpcnlmcGEwbzl3dWVycW8zMmlyaGZmYWVydXEyMDN1YWhkZjthb2pmb3dqYWBvM2BwOTNbLTB3cmc5YXdlaGZhdzllOHl1clt3YWVqZmFv"
  x.report("Base64.#decode64") { Base64.decode64(input) }
  x.report("RustBase64.#decode") { RustBase64.decode(input) }
  x.compare!
end
